<div class="data-grid__container">
  <dx-data-grid
    id="userDataGrid"
    [dataSource]="users"
    [allowColumnReordering]="true"
    [columnAutoWidth]="true"
    [allowColumnResizing]="true"
    [wordWrapEnabled]="true"
    [columnHidingEnabled]="true"
    [showBorders]="true"
  >
    <!-- Enable Editing -->
    <dxo-editing [allowAdding]="true"></dxo-editing>

    <!-- Toolbar -->
    <dxo-toolbar>
      <dxi-item widget="dxButton" location="before" [options]="addButtonOptions"> </dxi-item>
      <dxi-item name="columnChooserButton" locateInMenu="auto" location="after"></dxi-item>
      <!-- Add the search panel button to toolbar -->
      <dxi-item name="searchPanel"></dxi-item>
    </dxo-toolbar>

    <!-- Search Panel -->
    <dxo-search-panel [visible]="true" [highlightCaseSensitive]="false"> </dxo-search-panel>

    <!-- Profile Photo Column -->
    <dxi-column
      caption="Profile Photo"
      [minWidth]="120"
      alignment="center"
      cellTemplate="photoTemplate"
    >
    </dxi-column>
    <div *dxTemplate="let data of 'photoTemplate'">
      <img
        [src]="getImageSrc(data.data.profilePhoto)"
        class="profile-photo"
        style="border-radius: 50%; max-width: 100%; height: auto"
        [hidden]="!getImageSrc(data.data.profilePhoto)"
      />
    </div>

    <!-- Other Data Columns -->
    <dxi-column dataField="firstName" caption="First Name"></dxi-column>
    <dxi-column dataField="lastName" caption="Last Name"></dxi-column>
    <dxi-column dataField="age" caption="Age"></dxi-column>
    <dxi-column dataField="education" caption="Education"></dxi-column>
    <dxi-column dataField="nationalID" caption="National ID"></dxi-column>
    <dxi-column dataField="birthdate" caption="Birthdate" dataType="date"></dxi-column>

    <!-- Command Column -->
    <dxi-column type="buttons">
      <!-- Custom Edit -->
      <dxi-button hint="Edit" icon="edit" [onClick]="onEditClicked"></dxi-button>

      <!-- Custom Delete -->
      <dxi-button hint="Delete" icon="trash" [onClick]="onDeleteClicked"></dxi-button>
    </dxi-column>
  </dx-data-grid>

  <!-- Pop Up -->
  <app-popup [popupConfig]="popupConfig">
    <app-user-form></app-user-form>
  </app-popup>
</div>
